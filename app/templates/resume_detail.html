{% extends "base.html" %}

{% block title %}{{ resume.title }} — HireMe Pro{% endblock %}

{% block content %}
<section class="detail">
    <div class="detail-header">
        <div>
            <h1>{{ resume.title }}</h1>
            <p class="resume-meta">
                Last updated {{ resume.updated_at.strftime('%b %d, %Y at %I:%M %p') }}
            </p>
        </div>
        <div class="detail-header-actions">
            <a href="{{ url_for('main.download_resume', id=resume.id) }}" class="btn-sm btn-download">Download PDF</a>
            <a href="{{ url_for('main.builder', id=resume.id) }}" class="btn-sm btn-edit">Edit</a>
            <a href="{{ url_for('main.dashboard') }}" class="btn-sm btn-back">Back</a>
        </div>
    </div>

    {% if resume.summary %}
        <div class="detail-summary">
            <p>{{ resume.summary }}</p>
        </div>
    {% endif %}

    <div class="detail-section">
        <div class="section-header">
            <h2>Experience</h2>
            <a href="{{ url_for('main.add_experience', resume_id=resume.id) }}" class="btn-sm btn-add">Add</a>
        </div>
        {% if resume.experiences %}
            {% for exp in resume.experiences %}
                <div class="section-entry">
                    <div class="entry-body">
                        <h3>{{ exp.role }}</h3>
                        <p class="entry-sub">{{ exp.company }}{% if exp.start_date %} · {{ exp.start_date }}{% if exp.end_date %} — {{ exp.end_date }}{% endif %}{% endif %}</p>
                        {% if exp.description %}
                            <p class="entry-desc">{{ exp.description }}</p>
                        {% endif %}
                    </div>
                    <div class="entry-actions">
                        <a href="{{ url_for('main.edit_experience', id=exp.id) }}" class="btn-xs btn-edit">Edit</a>
                        <form method="POST" action="{{ url_for('main.delete_experience', id=exp.id) }}" class="inline-form"
                              onsubmit="return confirm('Remove this experience entry?');">
                            <button type="submit" class="btn-xs btn-delete">Delete</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="section-empty">No experience added yet.</p>
        {% endif %}
    </div>

    <div class="detail-section">
        <div class="section-header">
            <h2>Education</h2>
            <a href="{{ url_for('main.add_education', resume_id=resume.id) }}" class="btn-sm btn-add">Add</a>
        </div>
        {% if resume.educations %}
            {% for edu in resume.educations %}
                <div class="section-entry">
                    <div class="entry-body">
                        <h3>{{ edu.school }}</h3>
                        <p class="entry-sub">{{ edu.degree }}{% if edu.start_date %} · {{ edu.start_date }}{% if edu.end_date %} — {{ edu.end_date }}{% endif %}{% endif %}</p>
                        {% if edu.description %}
                            <p class="entry-desc">{{ edu.description }}</p>
                        {% endif %}
                    </div>
                    <div class="entry-actions">
                        <a href="{{ url_for('main.edit_education', id=edu.id) }}" class="btn-xs btn-edit">Edit</a>
                        <form method="POST" action="{{ url_for('main.delete_education', id=edu.id) }}" class="inline-form"
                              onsubmit="return confirm('Remove this education entry?');">
                            <button type="submit" class="btn-xs btn-delete">Delete</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="section-empty">No education added yet.</p>
        {% endif %}
    </div>

    <div class="detail-section">
        <div class="section-header">
            <h2>Skills</h2>
            <a href="{{ url_for('main.add_skill', resume_id=resume.id) }}" class="btn-sm btn-add">Add</a>
        </div>
        {% if resume.skills %}
            <div class="skills-grid">
                {% for skill in resume.skills %}
                    <div class="skill-tag">
                        <span class="skill-name">{{ skill.name }}</span>
                        {% if skill.level %}
                            <span class="skill-level">{{ skill.level }}</span>
                        {% endif %}
                        <div class="skill-actions">
                            <a href="{{ url_for('main.edit_skill', id=skill.id) }}" class="btn-xs btn-edit">Edit</a>
                            <form method="POST" action="{{ url_for('main.delete_skill', id=skill.id) }}" class="inline-form"
                                  onsubmit="return confirm('Remove this skill?');">
                                <button type="submit" class="btn-xs btn-delete">Delete</button>
                            </form>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="section-empty">No skills added yet.</p>
        {% endif %}
    </div>
</section>
{% endblock %}